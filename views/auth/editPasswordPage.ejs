<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>EDIT PASSWORD</title>
    <link rel="stylesheet" href="/style.css" />
  </head>
  <body>
    <div class="container">
      <%- include('../header.ejs') %>
      <form style="display: flex; flex-direction: column; gap: 10px; margin-bottom: 40px; width: 70%"
        class="input-section"
        id="input-section"
        action="change-password"
        method="POST"
      >
        <div class="input-field">
          <input
            type="password"
            name="oldpassword"
            placeholder="Enter your old password....."
            required
          />
        </div>
        <div class="input-field">
          <input
            type="password"
            name="newpassword"
            placeholder="Enter your new password....."
            required
          />
        </div>
        <div class="input-field">
          <input
            type="password"
            name="confirmpassword"
            placeholder="Verify your password....."
            required
          />
        </div>
        <% if(errors && errors.length>0) { %> <% errors.forEach((error)=>{%>
       <p class="error-msg"><%=error%></p>
       <% }) %> <%}%>
       <%if(success && success.length > 0){ %>
        <%success.forEach((msg)=>{%>
          <p class="success-msg" id="success-msg" style="color: green; font-weight: bold; margin-top: 10px; transition: opacity 2s ease-out"><%=msg%></p>
        <%})%>
      <%}%>

        <button class="shorten-btn" type="submit">Edit</button>
      </form>
      <%- include('../footer.ejs') %>
    </div>
  </body>
  <script>
  setTimeout(() => {
    const msg = document.getElementById("success-msg");
    if (msg) {
      msg.style.opacity = "0";   // fade out
      setTimeout(() => msg.remove(), 1000); // remove after fade
    }
  }, 3000); // 3 seconds
</script>

</html>
